# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0

github.setup        Sikarugir-App Creator 1.0.1 v
github.tarball_from releases
revision            0
name                sikarugir
platforms           {darwin >= 19}
license             Restrictive/Distributable
categories          emulators

supported_archs     arm64 x86_64
maintainers         {@Gcenx}
homepage            https://github.com/Sikarugir-App/Sikarugir/

description         ${name} is a user-friendly tool used to make ports of Microsoft Windows software to Apple's macOS.
long_description    {*}${description}

distname            Creator-v${version}
use_xz              yes

checksums           rmd160  babddfebd0715b35f2c2956d9dbbbac44aa31fea \
                    sha256  fbc86992107e054cacb0d09e28f6da93648cab3e29f5e46ae2c6d77e0fa62c2e \
                    size    793416

use_configure       no
build {}

destroot {
    move "${workpath}/Sikarugir Creator.app" "${destroot}${applications_dir}/Sikarugir Creator.app"
    system -W ${destroot}${applications_dir} "/usr/bin/codesign --deep --force --sign - 'Sikarugir Creator.app'"
}

pre-activate {
    if {${os.major} == 19 && ${os.minor} < 4 && ${os.platform} eq "darwin"} {
        ui_error "You must first update to macOS 10.15.4."
        return -code error "You must first update to macOS 10.15.4."
    }
}

if {[llength ${supported_archs}] > 1} {
    configure.universal_archs {*}${supported_archs}
    variant universal {}
}
