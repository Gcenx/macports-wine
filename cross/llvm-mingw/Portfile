# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0

github.setup        mstorsjo llvm-mingw 20260224
github.tarball_from releases
platforms           {darwin any >= 15}
categories          cross
supported_archs     arm64 x86_64
license             NCSA
maintainers         {@Gcenx}

description         {An LLVM/Clang/LLD based mingw-64 toolchain}
long_description    ${description}

distname            ${github.project}-${version}-ucrt-macos-universal
use_xz              yes

checksums           sha256  9dec187ce9bcab6823b9a3a40845e7c0f7149790289fde4015f902e4c2cde7b2 \
                    rmd160  af60a8edc9e49d67a53ba82b742fd8fe14ae30d2 \
                    size    121787540

use_configure       no
build {}

destroot {
    xinstall -d     ${destroot}${prefix}/libexec/llvm-mingw
    system -W ${workpath} "mv ${workpath}/${distname}/* ${destroot}${prefix}/libexec/llvm-mingw/"
}

if {[llength ${supported_archs}] > 1} {
    configure.universal_archs {*}${supported_archs}
    variant universal {}
}
